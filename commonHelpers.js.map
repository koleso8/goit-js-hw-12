{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const ulEl = document.querySelector('.gallery');\n\nfunction imgTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item> \n    <figure class=\"sign\">\n        <a href=\"${largeImageURL}\"><img class=\"list-img\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"\" width=\"360\" height=\"200\"/></a><span class=\"title-img\">\n        <figcaption class=\"title-img\"><ul class=\"figcaption\">\n      <li class=\"figcaption-item\">Likes<p class=\"counter\">${likes}</p></li>\n      <li class=\"figcaption-item\">Views<p class=\"counter\">${views}</p></li>\n      <li class=\"figcaption-item\">Comments<p class=\"counter\">${comments}</p></li>\n      <li class=\"figcaption-item\">Downloads<p class=\"counter\">${downloads}</p></li>\n    </ul></figcaption>\n    </figure>\n   </li>`;\n}\n\nfunction imagesTemplate(arr) {\n  return arr.map(imgTemplate).join('');\n}\n\nexport function innerImg(hits) {\n  const markup = imagesTemplate(hits);\n  ulEl.innerHTML = markup;\n}\nexport function insertImg(hits) {\n  const markup = imagesTemplate(hits);\n  ulEl.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { innerImg } from './render-functions';\nimport { insertImg } from './render-functions';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport axios from 'axios';\n\nfunction startLoader() {\n  document\n    .querySelector('.gallery')\n    .insertAdjacentHTML('afterend', '<div id=\"loader\" class=\"loader\"></div>');\n}\nfunction endLoader() {\n  document.querySelector('.loader').remove();\n}\n\nexport function searchImages(value, page) {\n  startLoader(); //_________________________loader_start\n\n  const baseUrl = 'https://pixabay.com/api/';\n  //__________________________________________________________________________________________params\n  const params = {\n    params: {\n      key: '44959261-ea439a2adbf8f7e5770dfe1a3',\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  };\n\n  axios\n    .get(baseUrl, params)\n    .then(response => {\n      if (!response) {\n        throw new Error(response.status);\n      }\n      return response.data;\n    })\n    .then(response => {\n      if (response.total !== 0) {\n        if (page > 1) {\n          insertImg(response.hits);\n        } else {\n          const totalPages = Math.ceil(response.totalHits / 15);\n          console.log(totalPages);\n          if (page < totalPages) {\n            innerImg(response.hits);\n          } else {\n            document\n              .querySelector('.load-more')\n              .classList.add('visually-hidden');\n            iziToast.info({\n              message:\n                \"We're sorry, but you've reached the end of search results\",\n              position: 'topRight',\n            });\n          }\n        }\n        let gallery = new SimpleLightbox('.gallery a');\n        gallery.refresh(); //_________________________________????????????????????????\n      } else {\n        iziToast.error({\n          message: 'Image is not found',\n          position: 'topRight',\n        }); //____________________________________________________iziToast_ERROR\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      endLoader(); //____________________loader_remove\n    });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImages } from './js/pixabay-api';\n\nconst refs = {\n  btnSubEl: document.querySelector('.btn-search'),\n  formEl: document.querySelector('.form'),\n  input: document.querySelector('[name=\"text\"]'),\n  ul: document.querySelector('ul'),\n  btnLoadMore: document.querySelector('.load-more'),\n};\n\nlet userValue;\nlet page = 1;\n\nrefs.formEl.addEventListener('submit', evt => {\n  evt.preventDefault();\n  userValue = refs.input.value.trim();\n  page = 1;\n  if (userValue) {\n    searchImages(userValue, page);\n    document.querySelector('.load-more').classList.remove('visually-hidden');\n    refs.formEl.addEventListener('click', e => {\n      if (e.target.name !== 'text') return;\n      refs.input.value = '';\n    });\n  } else {\n    iziToast.error({\n      message: 'Please fill in the input field',\n      position: 'topRight',\n    });\n  }\n});\n\nrefs.btnLoadMore.addEventListener('click', () => {\n  page += 1;\n  console.log(page);\n  searchImages(userValue, page);\n});\n"],"names":["ulEl","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","arr","innerImg","hits","markup","insertImg","startLoader","endLoader","searchImages","value","page","baseUrl","params","axios","response","totalPages","iziToast","SimpleLightbox","error","refs","userValue","evt","e"],"mappings":"owBAAA,MAAMA,EAAO,SAAS,cAAc,UAAU,EAE9C,SAASC,EAAY,CACnB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA,mBAEUL,CAAa,gCAAgCD,CAAY,UAAUE,CAAI;AAAA;AAAA,4DAE9BC,CAAK;AAAA,4DACLC,CAAK;AAAA,+DACFC,CAAQ;AAAA,gEACPC,CAAS;AAAA;AAAA;AAAA,SAIzE,CAEA,SAASC,EAAeC,EAAK,CAC3B,OAAOA,EAAI,IAAIT,CAAW,EAAE,KAAK,EAAE,CACrC,CAEO,SAASU,EAASC,EAAM,CAC7B,MAAMC,EAASJ,EAAeG,CAAI,EAClCZ,EAAK,UAAYa,CACnB,CACO,SAASC,EAAUF,EAAM,CAC9B,MAAMC,EAASJ,EAAeG,CAAI,EAClCZ,EAAK,mBAAmB,YAAaa,CAAM,CAC7C,CC1BA,SAASE,GAAc,CACrB,SACG,cAAc,UAAU,EACxB,mBAAmB,WAAY,wCAAwC,CAC5E,CACA,SAASC,GAAY,CACnB,SAAS,cAAc,SAAS,EAAE,OAAM,CAC1C,CAEO,SAASC,EAAaC,EAAOC,EAAM,CACxCJ,IAEA,MAAMK,EAAU,2BAEVC,EAAS,CACb,OAAQ,CACN,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,EAEEG,EACG,IAAIF,EAASC,CAAM,EACnB,KAAKE,GAAY,CAChB,GAAI,CAACA,EACH,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,IACtB,CAAK,EACA,KAAKA,GAAY,CAChB,GAAIA,EAAS,QAAU,EAAG,CACxB,GAAIJ,EAAO,EACTL,EAAUS,EAAS,IAAI,MAClB,CACL,MAAMC,EAAa,KAAK,KAAKD,EAAS,UAAY,EAAE,EACpD,QAAQ,IAAIC,CAAU,EAClBL,EAAOK,EACTb,EAASY,EAAS,IAAI,GAEtB,SACG,cAAc,YAAY,EAC1B,UAAU,IAAI,iBAAiB,EAClCE,EAAS,KAAK,CACZ,QACE,4DACF,SAAU,UACxB,CAAa,EAEJ,CACa,IAAIC,EAAe,YAAY,EACrC,QAAO,CACvB,MACQD,EAAS,MAAM,CACb,QAAS,qBACT,SAAU,UACpB,CAAS,CAET,CAAK,EACA,MAAME,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACbX,GACN,CAAK,CACL,CCxEA,MAAMY,EAAO,CACX,SAAU,SAAS,cAAc,aAAa,EAC9C,OAAQ,SAAS,cAAc,OAAO,EACtC,MAAO,SAAS,cAAc,eAAe,EAC7C,GAAI,SAAS,cAAc,IAAI,EAC/B,YAAa,SAAS,cAAc,YAAY,CAClD,EAEA,IAAIC,EACAV,EAAO,EAEXS,EAAK,OAAO,iBAAiB,SAAUE,GAAO,CAC5CA,EAAI,eAAc,EAClBD,EAAYD,EAAK,MAAM,MAAM,KAAI,EACjCT,EAAO,EACHU,GACFZ,EAAaY,EAAWV,CAAI,EAC5B,SAAS,cAAc,YAAY,EAAE,UAAU,OAAO,iBAAiB,EACvES,EAAK,OAAO,iBAAiB,QAASG,GAAK,CACrCA,EAAE,OAAO,OAAS,SACtBH,EAAK,MAAM,MAAQ,GACzB,CAAK,GAEDH,EAAS,MAAM,CACb,QAAS,iCACT,SAAU,UAChB,CAAK,CAEL,CAAC,EAEDG,EAAK,YAAY,iBAAiB,QAAS,IAAM,CAC/CT,GAAQ,EACR,QAAQ,IAAIA,CAAI,EAChBF,EAAaY,EAAWV,CAAI,CAC9B,CAAC"}